# 项目介绍：数据分析工具

本项目主要包含两个核心文件：`main.py` 和 `analysis.py`，分别承担用户交互和数据分析处理的功能。下面详细介绍这两个文件的作用和实现细节。

## 1. `main.py` 文件

### 功能概述
`main.py` 是项目的主程序文件，使用 `tkinter` 库创建了一个图形用户界面（GUI），为用户提供了一个直观的操作界面。用户可以通过该界面选择数据文件，调用不同的数据分析图表进行展示，还能查看相关性分析结果。

### 主要功能模块

#### 1.1 文件选择功能
- **实现方式**：使用 `tkinter.filedialog.askopenfilename()` 函数弹出文件选择对话框，允许用户选择要分析的数据文件。
- **作用**：用户选择文件后，程序会调用 `analysis.py` 中的 `read_and_clean_data()` 函数读取并清洗数据，为后续分析做准备。

#### 1.2 图表绘制按钮
- **按钮列表**：
    - **绘制 BMI 柱形图**：点击后调用 `analysis.py` 中的 `plot_bmi()` 函数，绘制各国平均身体质量指数柱形图。
    - **绘制预期寿命柱形图**：点击后调用 `analysis.py` 中的 `plot_life_expectancy()` 函数，绘制各国平均预期寿命柱形图。
    - **绘制酒精消费量柱形图**：点击后调用 `analysis.py` 中的 `plot_alcohol()` 函数，绘制各国平均酒精消费量柱形图。
    - **绘制矩阵图**：点击后调用 `analysis.py` 中的 `plot_pairplot()` 函数，绘制身体质量指数、预期寿命和酒精消费量的矩阵散点图。

#### 1.3 相关性结果显示功能
- **实现方式**：点击“显示相关性结果”按钮，程序会调用 `analysis.py` 中的 `summarize_data()` 函数，计算并在界面下方的文本框中显示身体质量指数、预期寿命和酒精消费量之间的相关性结果。

### 代码结构
- 使用 `tkinter.Tk()` 创建主窗口，设置窗口标题和大小。
- 通过 `tkinter.Button()` 创建各种功能按钮，并绑定相应的回调函数。
- 使用 `tkinter.Label()` 显示文件选择状态和提示信息。
- 使用 `tkinter.Text()` 创建文本框，用于显示相关性分析结果。

## 2. `analysis.py` 文件

### 功能概述
`analysis.py` 是项目的数据分析核心文件，主要负责数据的读取、清洗、可视化以及相关性分析。

### 主要功能模块

#### 2.1 数据读取与清洗
- **`get_country()` 函数**：获取有效国家列表，从固定的中日韩英美法德 7 个国家中筛选出在数据文件中存在的国家。
- **`read_and_clean_data()` 函数**：
    - 读取数据文件。
    - 提取指定国家的数据。
    - 重命名列名，将英文列名转换为中文。
    - 处理缺失值，分组计算平均值并填充。
    - 处理异常值，使用箱型图方法识别并处理异常数据。

#### 2.2 数据可视化
- **`plot_bmi()` 函数**：绘制各国平均身体质量指数柱形图，不同国家用不同颜色表示，并添加数值标签和图例。
- **`plot_life_expectancy()` 函数**：绘制各国平均预期寿命柱形图，同样使用不同颜色区分国家，添加数值标签和图例。
- **`plot_alcohol()` 函数**：绘制各国平均酒精消费量柱形图，具备颜色区分、数值标签和图例功能。
- **`plot_pairplot()` 函数**：绘制身体质量指数、预期寿命和酒精消费量的矩阵散点图，不同国家用不同颜色表示，添加图例和标题。

#### 2.3 相关性分析
- **`summarize_data()` 函数**：
    - 提取需要分析的列数据。
    - 计算相关系数矩阵。
    - 分析身体质量指数与预期寿命、身体质量指数与酒精消费量、预期寿命与酒精消费量之间的相关性，并将结果以字符串形式返回。

### 代码结构
- 导入 `pandas`、`numpy`、`matplotlib.pyplot` 和 `seaborn` 等数据分析和可视化库。
- 设置 `matplotlib` 支持中文显示。
- 定义各个功能函数，实现数据处理、可视化和相关性分析。

## 项目流程
1. 运行 `main.py`，打开图形用户界面。
2. 点击“选择文件”按钮，选择要分析的数据文件。
3. 点击不同的图表绘制按钮，查看相应的数据分析图表。
4. 点击“显示相关性结果”按钮，查看身体质量指数、预期寿命和酒精消费量之间的相关性分析结果。
make by 2025.6.25 @atulearning 
